const orbeMKUISelectors={formSelectLanguage:"md-form__select__language--footer",formSelectCountry:"md-form__select__country--footer",formUlCountrySelect:"orbeFooterCountryList",formUlLanguageSelect:"orbeFooterLanguageList",modalUlCountrySelect:"md-modal__footer-selector-modal__region-list-id",searchCountryInput:".md-footer-selector__content .md-form__select__search__input",modalTabs:".md-modal__bodyContent__tabs",blockModalUlCountrySelect:".md-modal__footer-selector-modal__region-list__mobile"};class OrbeMK{version="3.3.0";debugMode=!1;redirect_fullpath=!1;exclude_paths="";exclude_paths_splited="";orbeSession="";searchCountry=!1;showClassicFlagSelectorIcon=!1;showModalFlagSelectorIcon=!1;showClassicCurrencyCodeEnabled=!1;showModalCurrencyCodeEnabled=!1;advancedLanguageSettings={option_language_force_default:!1,option_language_force_showRecommendation:!1,option_language_force_langRedirect:!1};constructor(){this.elements=this._getElements(),this._setupSettings(),this._setupElements()}_setupSettings(){this.advancedLanguageSettings.option_language_force_default=mdApp_advancedLanguage.option_language_force_default,this.advancedLanguageSettings.option_language_force_showRecommendation=mdApp_advancedLanguage.option_language_force_showRecommendation,this.advancedLanguageSettings.option_language_force_langRedirect=mdApp_advancedLanguage.option_language_force_langRedirect,this.redirect_fullpath=mdApp_syncstoresData.redirect_fullpath,this.exclude_paths=mdApp_syncstoresData.exclude_paths,this.exclude_paths_splited=mdApp_syncstoresData.exclude_paths_splited,this.searchCountry=mdApp_searchCountry,this.showClassicFlagSelectorIcon=mdApp_showClassicFlagSelectorIcon,this.showClassicFlagSelectorIconCircle=mdApp_showClassicFlagSelectorIconCircle,this.showModalFlagSelectorIconCircle=mdApp_showModalFlagSelectorIconCircle,this.showModalFlagSelectorIcon=mdApp_showModalFlagSelectorIcon,this.showClassicCurrencyCodeEnabled=mdApp_showClassicCurrencyCodeEnabled,this.showModalCurrencyCodeEnabled=mdApp_showModalCurrencyCodeEnabled,sessionStorage.getItem("orbeSession")?(this.orbeSession=JSON.parse(sessionStorage.getItem("orbeSession")),this.currentPlan=this.orbeSession.metadata.plan):this.currentPlan=mdApp_currentPlan}enableDebugMode(){this.debugMode=!0}_getElements(){return{formSelectLanguage:document.getElementById(orbeMKUISelectors.formSelectLanguage),formSelectCountry:document.getElementById(orbeMKUISelectors.formSelectCountry),formUlCountrySelect:document.getElementById(orbeMKUISelectors.formUlCountrySelect),formUlLanguageSelect:document.getElementById(orbeMKUISelectors.formUlLanguageSelect),modalUlCountrySelect:document.getElementById(orbeMKUISelectors.modalUlCountrySelect),searchCountryInput:document.querySelector(orbeMKUISelectors.searchCountryInput),modalTabs:document.querySelector(orbeMKUISelectors.modalTabs),blockModalUlCountrySelect:document.querySelector(orbeMKUISelectors.blockModalUlCountrySelect)}}_setupElements(){this._refreshCountryEvents(),this._refreshLanguageEvents(),this._refreshModalEvents()}_submitFlow(e,t){null!=e&&e.preventDefault();let o=t.form;e=t.mdFormSelectCountry;if(null==e)return!0;var l=t.mdFormSelectLanguage;let r=t.mdFormUlCountrySelect,n=t.mdFormCountryCode,a=t.mdFormLanguageCode;t=t.mdFormReturnTo;let s,i=e.dataset.value,d=(null!=r?Array.from(r.querySelectorAll("a")).forEach(e=>{e.dataset.country===i&&(s=e)}):s=e,n.value=i,s.dataset.domainurl);var e=s.dataset.primary,c=this.getCountryDomain();let u=t,m=new URLSearchParams(window.location.search);if(u.value="",u.value=window.location.pathname+"?"+m.toString(),m.has("mdApp_countryCodeDomain")&&(t="mdApp_countryCodeDomain="+m.get("mdApp_countryCodeDomain"),h="mdApp_countryCodeDomain="+i,u.value=u.value.replace(t,h)),m.has("country")){var t="country="+m.get("country"),h="country="+i;u.value=u.value.replace(t,h)}else if(!1===m.has("country")){let e="";e=u.value.includes("?")?"&country="+i:"?country="+i,u.value=u.value+e}u.value=u.value+window.location.hash,this.debugMode&&console.log("Return To: "+u.value);let p=null;null!=l&&(p=l.dataset.value,a.value=p,this.setCookie("mdApp_showRecommendationLang",p,c,5184e3));t=s.dataset.subfoldersuffix,h=s.dataset.defaultlocale;if(this.setCookie("mdApp_countryCodeDomain",i,c,5184e3),mdApp_redirectMode){let t=this._forceRedirectFullPath(!0,i);if(""!==t&&"/"!==t[0]&&(t="/"+t),"undefined"!=typeof mdApp_redirectExternalList&&""!==mdApp_redirectExternalList&&Array.isArray(mdApp_redirectExternalList))for(const _ of mdApp_redirectExternalList){let e=_.Url+window.location.hash;if(_.RegionMode&&i===_.RegionCode)return t&&_.isShopify&&(e=_.Url+t),this.setCookie("mdApp_domainUrlTo",e,c,5184e3),this.debugMode?console.log("Redirect to: "+e):window.location=e,!0;if(i===_.CountryCode&&!1===_.RegionMode)return t&&_.isShopify&&(e=_.Url+t),this.setCookie("mdApp_domainUrlTo",e,c,5184e3),this.debugMode?console.log("Redirect to: "+e):window.location=e,!0}else{if(i===mdApp_redirectCountryCode&&!1===mdApp_redirectRegionMode){let e=mdApp_redirectUrl+window.location.hash;return t&&mdApp_redirectIsShopify&&(e=mdApp_redirectUrl+t),this.setCookie("mdApp_domainUrlTo",e,c,5184e3),this.debugMode?console.log("Redirect to: "+e):window.location=e,!0}if(mdApp_redirectRegionMode&&i===mdApp_redirectRegionCode){let e=mdApp_redirectUrl+window.location.hash;return t&&mdApp_redirectIsShopify&&(e=mdApp_redirectUrl+t),this.setCookie("mdApp_domainUrlTo",e,c,5184e3),this.debugMode?console.log("Redirect to: "+e):window.location=e,!0}}}if(s.dataset.externalstore){let e=s.dataset.externalstore;var g=e.split(",");let t=g[0];if(null!==p){let e=s.dataset.locales;var y=e.split(",");for(let e=0;e<g.length;e++)p===y[e]&&(t=g[e],this.debugMode&&console.log("Redirect to uri: "+t))}var l=d+"/"+t;let o=this._forceRedirectFullPath(!0,i),r=(""!==o&&"/"!==o[0]&&(o="/"+o),l+window.location.hash);return o&&s.dataset.externalfullpath&&(r=l+o),this.setCookie("mdApp_domainUrlTo",r,c,5184e3),this.debugMode?console.log("Redirect to: "+r):window.location="https://"+r,!0}if(("plus"===this.currentPlan||"enterprise"===this.currentPlan)&&(void 0!==e&&"undefined"===e&&void 0!==d&&d!=window.Shopify.shop&&"undefined"!==d))return d+=this.getSubFolderDomain(t,h,p),this.setCookie("mdApp_domainUrlTo",d,c,5184e3),l="https://",e=this._forceRedirectFullPath(!0,i),this.debugMode&&console.log("Url final casuistica 1 continuacion 1: "+e),e?(d+=e,this.debugMode&&console.log("Url final casuistica 1 continuacion 2: "+d)):d=d+"?country="+i+window.location.hash,l="https://"+d,this.debugMode?console.log("Redirect to: "+l):window.location=l,!0;return this.debugMode&&console.log("Submit form"),!1===this.debugMode&&o.submit(),!0}truncateString(e,t){return e.length<=t?e:e.slice(0,t)+"..."}_refreshCountryEvents(){null!==this.elements.formSelectCountry&&(this.elements.formSelectCountry.addEventListener("click",e=>{this.searchCountry?""===this.elements.searchCountryInput.value&&(this.elements.formUlCountrySelect.focus(),this.elements.formUlCountrySelect.toggleAttribute("hidden"),this.elements.formSelectCountry.setAttribute("aria-expanded",("false"===this.elements.formSelectCountry.getAttribute("aria-expanded")).toString()),this._hidePanel(this.elements.formSelectLanguage,this.elements.formUlLanguageSelect),this.elements.searchCountryInput.focus()):(this.elements.formUlCountrySelect.focus(),this.elements.formUlCountrySelect.toggleAttribute("hidden"),this.elements.formSelectCountry.setAttribute("aria-expanded",("false"===this.elements.formSelectCountry.getAttribute("aria-expanded")).toString()),this._hidePanel(this.elements.formSelectLanguage,this.elements.formUlLanguageSelect))}),this.elements.formUlCountrySelect.querySelectorAll("a").forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),this._setCountrySelector(e.currentTarget),this._hidePanel(this.elements.formSelectCountry,this.elements.formUlCountrySelect),null!==this.elements.formSelectLanguage&&this.refreshLanguageSelector(this.elements.formSelectLanguage,this.elements.formSelectCountry,this.elements.formUlLanguageSelect,this.elements.formUlCountrySelect)})),this.searchCountry&&this.elements.searchCountryInput.addEventListener("keydown",t=>{if("Enter"===t.key){t.preventDefault();t=this.elements.formUlCountrySelect.querySelectorAll("li");let e=Array.from(t).find(e=>"none"!==window.getComputedStyle(e).display);e&&e.firstElementChild.click()}}))}_addCountryEvents(e){e.addEventListener("click",e=>{e.preventDefault(),this._setCountrySelector(e.currentTarget),null!==this.elements.formSelectCountry&&(this._hidePanel(this.elements.formSelectCountry,this.elements.formUlCountrySelect),null!==this.elements.formSelectLanguage&&this.refreshLanguageSelector(this.elements.formSelectLanguage,this.elements.formSelectCountry,this.elements.formUlLanguageSelect,this.elements.formUlCountrySelect))})}_addLanguageEvents(e){e.addEventListener("click",e=>{e.preventDefault(),this._setLanguageSelector(e.currentTarget),null!==this.elements.formSelectLanguage&&this._hidePanel(this.elements.formSelectLanguage,this.elements.formUlLanguageSelect)})}_refreshLanguageEvents(){null!==this.elements.formSelectLanguage&&(this.elements.formSelectLanguage.addEventListener("click",()=>{this.elements.formUlLanguageSelect.focus(),this.elements.formUlLanguageSelect.toggleAttribute("hidden"),this.elements.formSelectLanguage.setAttribute("aria-expanded",("false"===this.elements.formSelectLanguage.getAttribute("aria-expanded")).toString()),this._hidePanel(this.elements.formSelectCountry,this.elements.formUlCountrySelect);let e=this.elements.formUlLanguageSelect.firstElementChild;e&&e.focus()}),this.elements.formUlLanguageSelect.addEventListener("keydown",function(e){let t=this.querySelectorAll("li"),o=document.activeElement;var r=Array.from(t).indexOf(o);switch(e.key){case"ArrowUp":e.preventDefault(),0<r&&t[r-1].focus();break;case"ArrowDown":e.preventDefault(),r<t.length-1&&t[r+1].focus();break;case" ":case"Enter":e.preventDefault(),o.firstElementChild.click()}}),this.elements.formUlLanguageSelect.querySelectorAll("a").forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),this._setLanguageSelector(e.currentTarget),this._hidePanel(this.elements.formSelectLanguage,this.elements.formUlLanguageSelect)})))}_hidePanel(e,t){null!==e&&(e.setAttribute("aria-expanded","false"),t.setAttribute("hidden",!0))}_createLanguageOption(e,t){let o=document.createElement("li"),r=(o.setAttribute("tabindex","-1"),o.setAttribute("data-locale",t),document.createElement("a")),l=(r.setAttribute("href","#"),r.classList.add("md-form__select__language__list-link"),r.setAttribute("data-value",t),document.createElement("div")),n=(l.classList.add("md-form__select__language__list-link-wrapper"),document.createElement("span"));return n.textContent=e,n.setAttribute("data-value",t),o.append(r),r.append(l),l.append(n),{li:o,a:r,div:l}}refreshLanguageSelector(l,n,a,s){if(null!==n){var i=navigator.language.split("-");if(null!==l){let t=n.dataset.value;if(mdApp_redirectMode)if("undefined"!=typeof mdApp_redirectExternalList&&""!==mdApp_redirectExternalList&&Array.isArray(mdApp_redirectExternalList)){let e=!1;for(const h of mdApp_redirectExternalList)if(t===h.CountryCode||t===h.RegionCode){var d=this._createLanguageOption(h.EndonymName,h.Locale);a.replaceChildren(),a.appendChild(d.li),this._addLanguageEvents(d.a),this._setLanguageSelector(d.a),e=!0;break}if(e)return!0}else if(t===mdApp_redirectCountryCode||t===mdApp_redirectRegionCode)return l=this._createLanguageOption(mdApp_redirectEndonymName,mdApp_redirectLocale),a.replaceChildren(),a.appendChild(l.li),this._addLanguageEvents(l.a),this._setLanguageSelector(l.a),!0;let o;Array.from(s.querySelectorAll("a")).forEach(e=>{e.dataset.country===t&&(o=e)});var c=this.advancedLanguageSettings.option_language_force_default;a.replaceChildren();let e=o.dataset.locales,r=o.dataset.namelocales;if(e&&r){let t=e.split(",");var u=r.split(",");let o=!1;for(let e=0;e<t.length;e++){var m=this._createLanguageOption(u[e],t[e]);0===e&&this._setLanguageSelector(m.a),c||o||(t[e]===i[0]||t[e]===navigator.language?(this._setLanguageSelector(m.a),o=!0):"en"===t[e]&&this._setLanguageSelector(m.a)),a.appendChild(m.li),this._addLanguageEvents(m.a)}c&&Array.from(a.querySelectorAll("a")).forEach(e=>{e.dataset.value===t[0]&&this._setLanguageSelector(e)})}}}}_forceRedirectFullPath(l=!0,n=""){if(this.debugMode&&console.log("Redirect Full Path: "+this.redirect_fullpath),this.redirect_fullpath){let e="",t=mdApp_currentPageRelativeUrl,o=new URLSearchParams(window.location.search),r=o.toString();var a;return(this.debugMode&&console.log("Url params: "+r),r)?(r=o.has("country")?(a="country="+o.get("country"),r.replace(a,"country="+n)):r+"&country="+n,e=t.substring(1)+"?"+r+window.location.hash,this.debugMode&&console.log("Url final casuistica 1: "+e),e):(l&&(e=t.substring(1)+"?country="+n+window.location.hash,this.debugMode&&console.log("Url final casuistica 2: "+e)),e)}return""}getSubFolderDomain(t,o,r=null){if(null!==r){let e=r;if(""!=t)return 2<e.length&&(r=e.split("-"),e=r[0]),"/"+e+"-"+t+"/";if(e!=o)return"/"+e+"/"}return"/"}getCountryDomain(){let e=location.hostname;if("www"===location.hostname.split(".")[0]){if(void 0!==location.hostname.split(".")[3])e=location.hostname.split(".")[3].length<3?location.hostname.split(".")[1]+"."+location.hostname.split(".")[2]+"."+location.hostname.split(".")[3]:location.hostname.split(".")[2]+"."+location.hostname.split(".")[3];else if(void 0!==location.hostname.split(".")[2]){if(location.hostname.split(".")[1].length<=3&&2==location.hostname.split(".")[2].length)return e;e=location.hostname.split(".")[1]+"."+location.hostname.split(".")[2]}}else if(void 0!==location.hostname.split(".")[3])e=location.hostname.split(".")[3].length<3?location.hostname.split(".")[1]+"."+location.hostname.split(".")[2]+"."+location.hostname.split(".")[3]:location.hostname.split(".")[2]+"."+location.hostname.split(".")[3];else if(void 0!==location.hostname.split(".")[2]){if(location.hostname.split(".")[1].length<=3&&2==location.hostname.split(".")[2].length)return e;if(2==location.hostname.split(".")[1].length&&3==location.hostname.split(".")[2].length)return e;e=location.hostname.split(".")[1]+"."+location.hostname.split(".")[2]}return e}openModal(e=""){let t=document.getElementById(e);t.style.display="block"}closeModal(e=""){let t=document.getElementById(e);t.style.display="none"}_setCountrySelector(e){Array.from(this.elements.formUlCountrySelect.querySelectorAll("a")).forEach(e=>{e.setAttribute("aria-current","false")}),e.setAttribute("aria-current","true");var t=e.querySelector("span").textContent.trim();null!==this.elements.formSelectCountry&&(this.elements.formSelectCountry.dataset.value=e.dataset.country,this.elements.formSelectCountry.querySelector("span").textContent=t,this.showClassicFlagSelectorIcon&&(this.elements.formSelectCountry.querySelector("img").setAttribute("alt",""),this.elements.formSelectCountry.querySelector("img").setAttribute("src",e.querySelector("img").src),e.querySelector("img").dataset.fix?this.elements.formSelectCountry.querySelector("img").classList.add("md-fix-flag-white"):this.elements.formSelectCountry.querySelector("img").classList.remove("md-fix-flag-white")))}findCountryByData(t,o){let r=null;return Array.from(this.elements.formUlCountrySelect.querySelectorAll("a")).forEach(e=>{e.dataset[t]===o&&(r=e)}),r}_createCountryOption(e,r,t={}){let o=document.createElement("li");o.setAttribute("tabindex","-1"),o.setAttribute("data-name",e),this.searchCountry&&(o.style.display="list-item");let l=document.createElement("a"),n=(l.setAttribute("href","#"),l.classList.add("md-form__select__country__list-link"),l.setAttribute("data-value",r),l.setAttribute("data-country",r),!1);if(0===Object.keys(t).length?mdApp_redirectRegionMode&&""!==mdApp_redirectRegionCode&&(l.setAttribute("data-country",mdApp_redirectRegionCode),l.setAttribute("data-regionmode",!0),n=!0):t.RegionMode&&""!==t.RegionCode&&(l.setAttribute("data-country",t.RegionCode),l.setAttribute("data-regionmode",!0),n=!0),l.setAttribute("data-domainurl","undefined"),l.setAttribute("data-subfoldersuffix","undefined"),l.setAttribute("data-defaultlocale","undefined"),l.setAttribute("data-primary","undefined"),!1===n){let e=this.findCountryByData("country",r);null!=e&&e.parentElement.remove()}let a=document.createElement("div"),s=(a.classList.add("md-form__select__country__list-link-wrapper"),document.createElement("span"));if(s.textContent=e,0===Object.keys(t).length?mdApp_redirectMode&&("symbol"===this.showClassicCurrencyCodeEnabled&&null!==mdApp_redirectCountryCurrencySymbol?s.textContent=e+" ("+mdApp_redirectCountryCurrencySymbol+")":"iso"===this.showClassicCurrencyCodeEnabled&&null!==mdApp_redirectCountryCurrencyCode?s.textContent=e+" ("+mdApp_redirectCountryCurrencyCode+")":("iso_symbol"===this.showClassicCurrencyCodeEnabled||"iso_symbol_flag"===this.showClassicCurrencyCodeEnabled&&null!==mdApp_redirectCountryCurrencyCode)&&(s.textContent=e+" ("+mdApp_redirectCountryCurrencyCode+" "+mdApp_redirectCountryCurrencySymbol+")")):"symbol"===this.showClassicCurrencyCodeEnabled&&null!==t.CountryCurrencySymbol?s.textContent=e+" ("+t.CountryCurrencySymbol+")":"iso"===this.showClassicCurrencyCodeEnabled&&null!==t.CountryCurrencyCode?s.textContent=e+" ("+t.CountryCurrencyCode+")":("iso_symbol"===this.showClassicCurrencyCodeEnabled||"iso_symbol_flag"===this.showClassicCurrencyCodeEnabled&&null!==t.CountryCurrencyCode)&&(s.textContent=e+" ("+t.CountryCurrencyCode+" "+t.CountryCurrencySymbol+")"),o.append(l),l.append(a),this.showClassicFlagSelectorIcon){let e=document.createElement("div"),t=(e.classList.add("md-form__select__country__list__flag-wrapper"),document.createElement("div")),o=(t.classList.add("md-form__select__country__list-link__flag"),document.createElement("img"));o.setAttribute("alt",""),this.showClassicFlagSelectorIconCircle?o.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.2.3/flags/1x1/"+r.toLowerCase()+".svg"):o.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.2.3/flags/4x3/"+r.toLowerCase()+".svg"),e.appendChild(t),t.appendChild(o),a.append(e)}return a.append(s),{li:o,a:l,div:a}}_createModalCountryOption(e,r,t={}){let o=document.createElement("li");o.classList.add("md-modal__footer-selector-modal__region-list-item"),o.setAttribute("tabindex","-1"),o.setAttribute("data-name",e),window.screen.width<=560&&o.classList.add("md-hide__country__element");let l=document.createElement("button"),n=(l.setAttribute("type","button"),l.classList.add("md-modal__footer-selector-modal__region-btn"),l.setAttribute("data-value",r),l.setAttribute("data-country",r),o.setAttribute("data-country",r),!1),a=(0===Object.keys(t).length?(mdApp_redirectRegionMode&&""!==mdApp_redirectRegionCode&&(l.setAttribute("data-country",mdApp_redirectRegionCode),l.setAttribute("data-regionmode",!0),n=!0),"undefined"!=typeof mdApp_redirectRegionName&&(o.setAttribute("data-region",mdApp_redirectRegionName),l.setAttribute("data-region",mdApp_redirectRegionName))):(t.RegionMode&&""!==t.RegionCode&&(l.setAttribute("data-country",t.RegionCode),l.setAttribute("data-regionmode",!0),n=!0),void 0!==t.RegionName&&(o.setAttribute("data-region",t.RegionName),l.setAttribute("data-region",t.RegionName))),l.setAttribute("data-domainurl","undefined"),l.setAttribute("data-subfoldersuffix","undefined"),l.setAttribute("data-defaultlocale","undefined"),l.setAttribute("data-primary","undefined"),!1===n&&Array.from(this.elements.modalUlCountrySelect.querySelectorAll("button")).forEach(e=>{e.dataset.country===r&&e.parentElement.remove()}),document.createElement("div")),s=(a.classList.add("md-modal__footer-selector-modal__flag-country-name"),document.createElement("span"));if(s.textContent=e,o.append(l),l.append(a),"none"!=this.showModalCurrencyCodeEnabled){let e=document.createElement("span");e.classList.add("md-modal__footer-selector-modal__region-iso"),0===Object.keys(t).length?mdApp_redirectMode&&("symbol"===this.showModalCurrencyCodeEnabled&&null!==mdApp_redirectCountryCurrencySymbol?e.textContent=mdApp_redirectCountryCurrencySymbol:"iso"===this.showModalCurrencyCodeEnabled&&null!==mdApp_redirectCountryCurrencyCode?e.textContent=mdApp_redirectCountryCurrencyCode:("iso_symbol"===this.showModalCurrencyCodeEnabled||"iso_symbol_flag"===this.showModalCurrencyCodeEnabled&&null!==mdApp_redirectCountryCurrencyCode)&&(e.textContent=mdApp_redirectCountryCurrencyCode+" "+mdApp_redirectCountryCurrencySymbol)):"symbol"===this.showModalCurrencyCodeEnabled&&null!==t.CountryCurrencySymbol?e.textContent=t.CountryCurrencySymbol:"iso"===this.showModalCurrencyCodeEnabled&&null!==t.CountryCurrencyCode?e.textContent=t.CountryCurrencyCode:("iso_symbol"===this.showModalCurrencyCodeEnabled||"iso_symbol_flag"===this.showModalCurrencyCodeEnabled&&null!==t.CountryCurrencyCode)&&(e.textContent=t.CountryCurrencyCode+" "+t.CountryCurrencySymbol),l.append(e)}if(this.showModalFlagSelectorIcon){let e=document.createElement("div"),t=(e.classList.add("md-modal__footer-selector-modal__flag-wrapper"),document.createElement("div")),o=(t.classList.add("md-modal__footer-locale-flag"),document.createElement("img"));o.setAttribute("alt",""),this.showModalFlagSelectorIconCircle?o.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.2.3/flags/1x1/"+r.toLowerCase()+".svg"):o.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.2.3/flags/4x3/"+r.toLowerCase()+".svg"),e.appendChild(t),t.appendChild(o),a.append(e)}return a.append(s),{li:o,button:l,div:a}}_setLanguageSelector(e){Array.from(this.elements.formUlLanguageSelect.querySelectorAll("a")).forEach(e=>{e.setAttribute("aria-current","false")}),e.setAttribute("aria-current","true"),null!==this.elements.formSelectLanguage&&(this.elements.formSelectLanguage.dataset.value=e.dataset.value,this.elements.formSelectLanguage.querySelector("span").textContent=e.querySelector("span").textContent)}processGeolocation(){let o=this.elements.formUlCountrySelect,r=this.elements.modalUlCountrySelect,e=new URLSearchParams(window.location.search);var t;if((e.has("OrbeDMMDApp")&&this.enableDebugMode(),mdApp_redirectMode)&&("undefined"!=typeof mdApp_redirectExternalList&&""!==mdApp_redirectExternalList&&Array.isArray(mdApp_redirectExternalList)?Array.from(mdApp_redirectExternalList).forEach(e=>{var t;null!=o&&(t=this._createCountryOption(e.CountryName,e.CountryCode,e),o.appendChild(t.li),this._addCountryEvents(t.a)),null!=r&&(t=this._createModalCountryOption(e.CountryName,e.CountryCode,e),r.appendChild(t.li))}):(null!=o&&(t=this._createCountryOption(mdApp_redirectCountryName,mdApp_redirectCountryCode),o.appendChild(t.li),this._addCountryEvents(t.a)),null!=r&&(t=this._createModalCountryOption(externalCountry.CountryName,externalCountry.CountryCode,externalCountry),r.appendChild(t.li))),null!=o&&this.sortLiSelect(o),null!=r)){let t=this.elements.modalTabs.querySelector(".md-tab_active").dataset.region;Array.from(r.querySelectorAll("li")).forEach(e=>{e.classList.remove("md-hide__country__element"),e.dataset.region!==t&&e.classList.add("md-hide__country__element")})}}async init(){var e=this.elements.formUlCountrySelect;return null!=e&&this.sortLiSelect(e),this.processGeolocation()}getCookie(e){let t="; "+document.cookie,o=t.split(`; ${e}=`);if(2===o.length)return o.pop().split(";").shift()}setCookie(e,t,o="",r){let l=o&&"myshopify.com"!==o?o?"domain="+o+";":"":"";document.cookie=`${e}=${t};path=/;${l}max-age=${r};`}sortLiSelect(e){const t=e;e=t.querySelectorAll("li");t.append(...[...e].sort((e,t)=>{e=e.dataset.name,t=t.dataset.name;return e<t?-1:t<e?1:0}))}_refreshModalEvents(){null!==this.elements.modalTabs&&(this.elements.modalTabs.querySelectorAll("li").forEach(e=>e.addEventListener("click",e=>{e.preventDefault();var e=e.currentTarget.dataset.region,t=document.querySelector(".md-tab__"+e);this._setModalTab(t,e)})),window.screen.width<=560&&(Array.from(this.elements.modalUlCountrySelect.querySelectorAll("li")).forEach(e=>{e.classList.add("md-hide__country__element")}),this.elements.modalTabs.querySelector(".md-tab_active")&&this.elements.modalTabs.querySelector(".md-tab_active").classList.remove("md-tab_active"))),null!==this.elements.modalUlCountrySelect&&this.elements.modalUlCountrySelect.addEventListener("keydown",function(e){let t=this.querySelectorAll("li:not(.md-hide__country__element)"),o=document.activeElement;var r=Array.from(t).indexOf(o);switch(e.key){case"ArrowUp":e.preventDefault(),0<r&&t[r-1].focus();break;case"ArrowDown":e.preventDefault(),r<t.length-1&&t[r+1].focus();break;case" ":case"Enter":e.preventDefault(),o.firstElementChild.click()}})}_setModalTab(t,o){let r=!1;window.screen.width<=560&&(r=!0),null!==this.elements.modalTabs&&Array.from(this.elements.modalTabs.querySelectorAll("li.md-tab__element")).forEach(e=>{e.dataset.region===o&&e.classList.contains("md-tab_active")?window.screen.width<=560&&(Array.from(this.elements.modalUlCountrySelect.querySelectorAll("li")).forEach(e=>{e.classList.add("md-hide__country__element")}),this.elements.modalTabs.querySelector(".md-tab_active")&&this.elements.modalTabs.querySelector(".md-tab_active").classList.remove("md-tab_active")):e.dataset.region===o&&(this.elements.modalTabs.querySelector(".md-tab_active")&&this.elements.modalTabs.querySelector(".md-tab_active").classList.remove("md-tab_active"),e.classList.add("md-tab_active"),Array.from(this.elements.modalUlCountrySelect.querySelectorAll("li")).forEach(e=>{e.classList.remove("md-hide__country__element"),e.dataset.region!==o&&e.classList.add("md-hide__country__element")}),r&&t.insertAdjacentElement("afterend",this.elements.blockModalUlCountrySelect))})}}const orbitoMK=new OrbeMK;orbitoMK.init();